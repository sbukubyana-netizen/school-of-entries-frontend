<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>School of Entries</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #e9f2ff;
        color: #003366;
        margin: 0;
        padding: 0;
        text-align: center;
      }
      header {
        background-color: #004aad;
        color: white;
        padding: 20px;
      }
      .container {
        margin-top: 40px;
      }
      button {
        background-color: #004aad;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      button:hover {
        background-color: #003399;
      }
      .result {
        margin-top: 20px;
        font-size: 1.2em;
      }
      footer {
        margin-top: 60px;
        background-color: #004aad;
        color: white;
        padding: 20px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>School of Entries üéØ</h1>
      <p>Founded by <b>Sibusiso Kubyana</b></p>
    </header>

    <div class="container">
      <h2>AI Market Predictions</h2>
      <p>Enter a symbol (e.g. XAUUSD, V75, EURUSD)</p>
      <input type="text" id="symbol" placeholder="Enter symbol..." />
      <br /><br />
      <button onclick="getPrediction()">Get Prediction</button>
      <div id="result" class="result">Waiting for AI prediction...</div>
    </div>

    <footer>
      <p>
        School of Entries ‚Äî Empowering traders with powerful AI insights for
        smart market entries.
      </p>
    </footer>

    <script>
      async function getPrediction() {
        const symbol = document.getElementById("symbol").value;
        const resultDiv = document.getElementById("result");

        if (!symbol) {
          resultDiv.innerHTML = "‚ö†Ô∏è Please enter a symbol first!";
          return;
        }

        resultDiv.innerHTML = "‚è≥ Fetching AI prediction...";

        try {
          const response = await fetch(
            "https://ai-trading-backend-bdxb.onrender.com/predict",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                symbol: symbol,
                candles: {
                  M1: [{ open: 100, high: 101, low: 99, close: 100 }],
                  M5: [{ open: 100, high: 102, low: 98, close: 101 }],
                  M15: [{ open: 100, high: 103, low: 97, close: 102 }],
                  H4: [{ open: 100, high: 104, low: 96, close: 103 }],
                },
              }),
            }
          );

          const data = await response.json();

          if (data.signal) {
            resultDiv.innerHTML = `
              ‚úÖ Symbol: <b>${data.symbol}</b><br>
              üìä Signal: <b>${data.signal}</b><br>
              ‚ö° Confidence: <b>${(data.confidence * 100).toFixed(1)}%</b>
            `;
          } else {
            resultDiv.innerHTML = "‚ùå No prediction data received.";
          }
        } catch (error) {
          resultDiv.innerHTML = "üö´ Connection error (check backend CORS).";
        }
      }
    </script>
  </body>
</html>
